{
  "version": 3,
  "sources": ["../src/utils/object-safe.ts", "../src/utils/create-element.ts", "../src/utils/enumerate.ts", "../src/core/create-editor-element.ts", "../src/core/input.ts", "../src/core/language.ts", "../src/langs/text.ts", "../src/core/lunacode-core.ts"],
  "sourcesContent": ["export default function(input:object,sample:object):object{\r\n  for(const key of Object.keys(input)){\r\n    sample[key]=input[key];\r\n  }\r\n  return sample;\r\n}", "export default (tagName:string,options)=>{\r\n  const tag:HTMLDivElement|HTMLTextAreaElement|HTMLElement = document.createElement(tagName);\r\n  if(options.style){\r\n    Object.keys(options.style).forEach(style=>{\r\n      tag.style[style]=options.style[style];\r\n    });\r\n    delete options.style;\r\n  }\r\n  Object.keys(options).forEach(attr=>{\r\n    tag[attr]=options[attr];\r\n  });\r\n  return tag;\r\n}", "export default (arr:Array<any>|string):Array<any>=>{\r\n  const result=[];\r\n  let index=0;\r\n  for(const element of arr){\r\n    result.push([index,element]);\r\n    index++;\r\n  }\r\n  return result;\r\n}", "import { createElement } from \"../utils/index.ts\";\r\nexport default ()=>{\r\n  const parent=createElement(\"div\",{\r\n    style:{\r\n      width:\"100%\",\r\n      height:\"100%\",\r\n      backgroundColor:\"transparent\",\r\n      position:\"relative\"\r\n    }\r\n  })\r\n  const canvas:HTMLCanvasElement=createElement(\"canvas\",{\r\n    style:{\r\n      width:\"100%\",\r\n      height:\"100%\",\r\n      backgroundColor:\"transparent\",\r\n      position:\"absolute\"\r\n    }\r\n  });\r\n\r\n  const textarea=createElement(\"textarea\",{\r\n    style:{\r\n      border:\"none\",\r\n      borderRadius:\"0px\",\r\n      outline:\"none\",\r\n      resize:\"none\",\r\n      width:\"100%\",\r\n      height:\"100%\",\r\n      backgroundColor:\"transparent\",\r\n      position:\"absolute\",\r\n      color:\"transparent\",\r\n      padding:\"0px\",\r\n      caretColor:\"#000\",\r\n    }\r\n  });\r\n  parent.append(canvas);\r\n  parent.append(textarea);\r\n  return {\r\n    editorElement:parent,\r\n    textarea:textarea,\r\n    canvas:canvas,\r\n  };\r\n}", "import Language from \"./language\";\r\nimport {getTextareaPosition,createElement,enumerate} from \"../utils/index.ts\";\r\n\r\ntype drawOptions={\r\n  language:Language,\r\n  inputEvent:InputEvent,\r\n  isIME:boolean,\r\n  imeEndEvent:CompositionEvent,\r\n  textarea:HTMLTextAreaElement,\r\n  canvas:HTMLCanvasElement,\r\n  canvasAPI:CanvasRenderingContext2D,\r\n  fontSize:number,\r\n  fontFamily:string,\r\n  lineHeight:number,\r\n}\r\nexport default function draw(options:drawOptions){\r\n  const {\r\n    language,\r\n    inputEvent,\r\n    imeEndEvent,\r\n    isIME,\r\n    textarea,\r\n    canvas,\r\n    canvasAPI,\r\n    fontSize,\r\n    fontFamily,\r\n    lineHeight,\r\n  } = options;\r\n\r\n  canvas.width = canvas.getBoundingClientRect().width;\r\n  canvas.height = canvas.getBoundingClientRect().height;\r\n  canvasAPI.font = `${fontSize}px ${fontFamily}`;\r\n  canvasAPI.clearRect(0, 0, canvas.width, canvas.height);\r\n  const rows=[];\r\n  for(const [index,char] of enumerate(textarea.value)){\r\n    rows.push({\r\n      color:\"#000\",\r\n      char\r\n    });\r\n  }\r\n\r\n  let line=0;\r\n  let row=0;\r\n  for(const [index,charData] of enumerate(rows)){\r\n    if(charData.char===\"\\n\"){\r\n      line++;\r\n      row=0;\r\n    }else{\r\n      canvasAPI.fillText(charData.char, row*10, (lineHeight*(line+1))-(lineHeight-fontSize));\r\n      row++;\r\n    }\r\n  }\r\n\r\n  if(isIME)return;\r\n  language.highlight({\r\n    setColor(start,end){\r\n      \r\n    }\r\n  });\r\n}", "export default class Language{\r\n  constructor(){\r\n\r\n  }\r\n  highlight(ctx){\r\n\r\n  }\r\n}", "import Language from \"../core/language.ts\";\r\nexport default class TextLanguage extends Language{\r\n  highlight(){\r\n    \r\n  }\r\n}", "import { objectSafe } from \"../utils/index.ts\";\r\nimport createEditorElement from \"./create-editor-element.ts\";\r\nimport input from \"./input.ts\";\r\nimport Language from \"./language.ts\";\r\nimport TextLanguage from \"../langs/text.ts\";\r\n\r\nexport default class LunacodeCore{\r\n  element:HTMLElement;\r\n  textarea:HTMLElement;\r\n  editorElement:HTMLElement;\r\n  language:Language;\r\n  isIME:boolean;\r\n  canvas:HTMLElement;\r\n  canvasAPI;\r\n  #fontSize:number;\r\n  #fontFamily:string;\r\n  #lineHeight:number;\r\n  constructor(options){\r\n    options=objectSafe(options,{\r\n      element:document.createElement(\"div\"),\r\n      language:new TextLanguage(),\r\n      fontSize:23,\r\n      fontFamily:\"sans-serif\",\r\n      lineHeight:30\r\n    });\r\n    this.#fontSize=options.fontSize;\r\n    this.#fontFamily=options.fontFamily;\r\n    this.#lineHeight=options.lineHeight;\r\n    const {element,language,fontFamily} = options;\r\n\r\n    this.element=element;\r\n    this.language=language;\r\n    this.isIME=false;\r\n    // backup text\r\n    const text=element.textContent;\r\n    // child to\r\n    const {editorElement,textarea,canvas}=createEditorElement();\r\n    element.append(editorElement);\r\n    textarea.style.fontSize=options.fontSize+\"px\";\r\n    textarea.style.fontFamily=options.fontFamily\r\n    textarea.style.lineHeight=options.lineHeight+\"px\";\r\n    textarea.addEventListener(\"input\",(event)=>{\r\n      this.#input({\r\n        inputEvent:event,\r\n        imeEndEvent:null\r\n      });\r\n    });\r\n    textarea.addEventListener(\"compositionstart\",(event)=>{\r\n      this.isIME=true;\r\n    });\r\n    textarea.addEventListener(\"compositionend\",(event)=>{\r\n      this.isIME=false;\r\n      this.#input({\r\n        inputEvent:null,\r\n        imeEndEvent:event\r\n      });\r\n    });\r\n    this.editorElement=editorElement;\r\n    this.textarea=textarea;\r\n    this.canvas=canvas;\r\n    this.canvasAPI=canvas.getContext('2d');\r\n  }\r\n  #input({inputEvent,imeEndEvent}){\r\n    input.call(this,{\r\n      inputEvent,\r\n      imeEndEvent,\r\n      language:this.language,\r\n      isIME:this.isIME,\r\n      textarea:this.textarea,\r\n      canvas:this.canvas,\r\n      canvasAPI:this.canvasAPI,\r\n      fontSize:this.#fontSize,\r\n      fontFamily:this.#fontFamily,\r\n      lineHeight:this.#lineHeight,\r\n    });\r\n  }\r\n  setLanguage(language:Language){\r\n    this.language=language;\r\n  }\r\n}"],
  "mappings": "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",
  "names": []
}
